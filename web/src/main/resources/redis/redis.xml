<?xml version="1.0" encoding="UTF-8"?>
<beans
        xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

       <!-- redis连接池的配置 -->
       <bean id="jedisPoolConfig" class="redis.clients.jedis.JedisPoolConfig">
              <!-- 说明一个pool可以有多少个Jedis实例 -->
              <!--<property name="maxActive" value="200" />-->
              <!-- 最大Idle-->
              <property name="maxIdle" value="5" />
              <!-- 最小Idle -->
              <property name="minIdle" value="1" />
              <!-- 获得一个jedis实例的时候是否检查连接可用性（ping()） -->
              <property name="testOnBorrow" value="true" />
              <!-- return 一个jedis实例给pool时，是否检查连接可用性（ping()） -->
              <property name="testOnReturn" value="true" />
              <!-- idle状态监测用异步线程evict进行检查， -->
              <property name="testWhileIdle" value="true" />
              <!-- 一次最多evict的pool里的jedis实例个数 -->
              <property name="numTestsPerEvictionRun" value="10" />
              <!-- test idle 线程的时间间隔 -->
              <property name="timeBetweenEvictionRunsMillis" value="60000" />
              <!--最大等待wait时间-->
              <!--<property name="maxWait" value="3000" />-->
              <!--<property name="whenExhaustedAction" value="" />-->
       </bean>

       <!-- redis的连接池pool，不是必选项：timeout/password  -->
       <bean id = "jedisPool" class="redis.clients.jedis.JedisPool">
              <constructor-arg index="0" ref="jedisPoolConfig"/>
              <constructor-arg index="1" value="${redis.host}" type="java.lang.String"/> <!-- add type="String"否则会报错 -->
              <constructor-arg index="2" value="${redis.port}" type="int"/>
              <constructor-arg index="3" value="5000" type="int"/>
       </bean>
</beans>
